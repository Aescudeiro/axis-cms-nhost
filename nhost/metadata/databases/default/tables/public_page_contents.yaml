table:
  name: page_contents
  schema: public
object_relationships:
  - name: content
    using:
      foreign_key_constraint_on: content_id
  - name: page
    using:
      foreign_key_constraint_on: page_id
insert_permissions:
  - role: user
    permission:
      check:
        page:
          site:
            organization:
              organization_users:
                _and:
                  - user_id:
                      _eq: X-Hasura-User-Id
                  - role:
                      _in:
                        - org_admin
                        - org_editor
      columns:
        - order
        - content_id
        - id
        - page_id
    comment: ""
select_permissions:
  - role: user
    permission:
      columns:
        - order
        - content_id
        - id
        - page_id
      filter:
        page:
          site:
            organization:
              organization_users:
                _and:
                  - user_id:
                      _eq: X-Hasura-User-Id
                  - role:
                      _in:
                        - org_admin
                        - org_editor
    comment: ""
update_permissions:
  - role: user
    permission:
      columns:
        - order
        - content_id
        - id
        - page_id
      filter:
        page:
          site:
            organization:
              organization_users:
                _and:
                  - user_id:
                      _eq: X-Hasura-User-Id
                  - role:
                      _in:
                        - org_admin
                        - org_editor
      check:
        page:
          site:
            organization:
              organization_users:
                _and:
                  - user_id:
                      _eq: X-Hasura-User-Id
                  - role:
                      _in:
                        - org_admin
                        - org_editor
    comment: ""
delete_permissions:
  - role: user
    permission:
      filter:
        page:
          site:
            organization:
              organization_users:
                _and:
                  - user_id:
                      _eq: X-Hasura-User-Id
                  - role:
                      _in:
                        - org_admin
                        - org_editor
    comment: ""
